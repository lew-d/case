<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>case</title>
</head>
<body>
	<script src="/socket.io/socket.io.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
	<link rel="stylesheet" href="main.css">
	<script>
		var socket = io();
		var loaded = false;

		function chunk(array, size) {
			if (!array) return [];
			const firstChunk = array.slice(0, size); // create the first chunk of the given array
			if (!firstChunk.length) {
				return array; // this is the base case to terminal the recursive
			}
			return [firstChunk].concat(chunk(array.slice(size, array.length), size)); 
		}

		socket.on('thumb_list', function(msg){
			if(loaded == false){
				var cols = chunk(msg, 4)
				for(var col in cols){
					if (!$("#" + col).length){
						$('body').prepend($('<div>', {class: 'columns', id: col}));
					}
					for(var img in cols[col]){
						$("#" + col).prepend($('<img>', {src: "thumbnails/" + cols[col][img]}));
					}
				}
				loaded = true;
			}
		});
	</script>
	
</body>
</html>